<div class="page-container">
    <div class="page-title title-background">
        <h1 class="title-text" data-bind="text: api() ? api().displayName : 'The specified API does not exsist'">
        </h1>
    </div>

    <div class="page-menu">
        <div class="list-container">
            <div class="items"
                data-bind="{css: {'full': api() && (api().type === 'websocket' || api().type === 'graphql')}}">
                <api-list-dropdown params="{ allowSelection: true }" class="api-dropdown"></api-list-dropdown>
                <input type="search" class="form-control form-control-light" aria-label="Search this page"
                    placeholder="Search this page" spellcheck="false" data-bind="textInput: pattern" />
                <!-- ko if: api && versionApis().length > 0 -->
                API version
                <label class="select-badge">
                    <select id="apiVersions" aria-label="API versions"
                        data-bind="options: versionApis, optionsValue: 'name', optionsText: 'apiVersion', value: currentApiVersion">
                    </select>
                    <span class="arrow flex align-items-center justify-content-center">
                        <i class="icon-emb icon-emb-chevron-down"></i>
                    </span>
                </label>
                <!-- /ko -->
                <hr>
                <details open class="details-styled">
                    <summary aria-label="About">
                        <div class="menu-list-heading title">
                            About
                            <i class="icon-emb icon-emb-chevron-down"></i>
                        </div>
                    </summary>
                    <div class="menu-list" role="listbox" aria-label="About this API">
                        <!-- ko foreach: { data: staticSelectableMenuItems, as: 'menuItem' } -->
                        <div class="menu-list-item" role="option"
                            data-bind="activate: $component.selectMenuItem, css: { 'selected': $component.selectedMenuItem() == menuItem }">
                            <span data-bind="text: menuItem.displayName"></span>
                        </div>
                        <!-- /ko -->
                    </div>
                </details>

                <hr>
                <details open class="details-styled" id="details-wiki">
                    <summary aria-label="Documentations">
                        <div class="menu-list-heading title">
                            Documentations
                            <i class="icon-emb icon-emb-chevron-down"></i>
                        </div>
                    </summary>
                    <div class="menu-list" role="listbox" aria-label="Documentations">
                        <!-- ko if: wikiLoading -->
                        <spinner class="menu-list-item"></spinner>
                        <!-- /ko -->

                        <!-- ko ifnot: wikiLoading -->
                        <!-- ko foreach: { data: filteredWikiDocumentationMenuItems(), as: 'menuItem' } -->
                        <div class="menu-list-item" role="option"
                            data-bind="activate: $component.selectMenuItem, css: { 'selected': $component.selectedMenuItem() == menuItem }">
                            <span
                                data-bind="text: menuItem.displayName, css: { 'text-truncate': !$component.wrapText(), 'text-wrap': $component.wrapText() }"></span>
                        </div>
                        <!-- /ko -->

                        <!-- ko if: filteredWikiDocumentationMenuItems().length == 0 -->
                        <span>No documentations to display</span>
                        <!-- /ko -->
                        <!-- /ko -->
                    </div>
                </details>

                <hr>
                <details open class="details-styled" id="details-operations">
                    <summary aria-label="Operations">
                        <div class="menu-list-heading title">
                            Operations
                            <i class="icon-emb icon-emb-chevron-down"></i>
                        </div>
                    </summary>

                    <!-- ko if: api()?.type === 'graphql' -->
                    <select class="form-control form-control-light" aria-label="Operations"
                        data-bind="options: graphqlTypes"></select>
                    <!-- /ko -->

                    <!-- ko ifnot: api()?.type === 'graphql' -->
                    <!-- ko if: !groupOperationsByTag()-->
                    <div class="menu-list" role="listbox" aria-label="Operations">
                        <!-- ko if: operationsLoading -->
                        <spinner class="menu-list-item"></spinner>
                        <!-- /ko -->

                        <!-- ko ifnot: operationsLoading -->
                        <!-- ko foreach: { data: operationsMenuItems(), as: 'menuItem' } -->
                        <div class="menu-list-item" role="option"
                            data-bind="activate: $component.selectMenuItem, css: { 'selected': $component.selectedMenuItem() == menuItem }">
                            <div class="http-method" data-bind="attr: { 'data-method': menuItem.method }"></div>
                            <span
                                data-bind="text: menuItem.displayName, css: { 'text-truncate': !$component.wrapText(), 'text-wrap': $component.wrapText() }"></span>
                        </div>
                        <!-- /ko -->
                        <!-- ko if: operationsPageNextLink() -->
                        <!-- ko if: moreOperationsLoading -->
                        <spinner class="menu-list-item"></spinner>
                        <!-- /ko -->

                        <!-- ko ifnot: moreOperationsLoading -->
                        <a href="#" class="menu-list-item" role="option"
                            data-bind="click: loadMoreOperationsUngruped">Show more</a>
                        <!-- /ko -->
                        <!-- /ko -->
                        <!-- ko if: operationsMenuItems().length == 0 -->
                        <span>No operations to display</span>
                        <!-- /ko -->
                        <!-- /ko -->
                    </div>
                    <!-- /ko -->

                    <!-- ko if: groupOperationsByTag()-->
                    <div class="menu-list" role="group" aria-label="Operations grouped by tags">
                        <!-- ko if: operationsLoading -->
                        <spinner class="fit"></spinner>
                        <!-- /ko -->

                        <!-- ko ifnot: operationsLoading -->
                        <!-- ko foreach: { data: operationsByTagsMenuItems(), as: 'tagMenuItem' } -->

                        <details class="tag details-styled" role="group"
                            data-bind="{ attr: { 'id': 'details-tag-' + tagMenuItem.tagName } }">
                            <summary data-bind="attr:{ 'aria-label': 'Tag ' + tagMenuItem.tagName }">
                                <div class="menu-list-heading">
                                    <span data-bind="text:tagMenuItem.tagName"></span>
                                    <i class="icon-emb icon-emb-chevron-down"></i>
                                </div>
                            </summary>
                            <div role="listbox" aria-label="Operations">
                                <!-- ko foreach: { data: tagMenuItem.operations, as: 'menuItem' } -->
                                <div class="menu-list-item" role="option"
                                    data-bind="activate: $component.selectMenuItem, css: { 'selected': $component.selectedMenuItem() == menuItem }">
                                    <div class="http-method" data-bind="attr: { 'data-method': menuItem.method }">
                                    </div>
                                    <span data-bind="text: menuItem.displayName"></span>
                                </div>
                                <!-- /ko -->
                            </div>
                        </details>

                        <!-- /ko -->
                        <!-- ko if: operationsPageNextLink() -->
                        <!-- ko if: moreOperationsLoading -->
                        <spinner class="menu-list-item"></spinner>
                        <!-- /ko -->

                        <!-- ko ifnot: moreOperationsLoading -->
                        <a href="#" class="menu-list-item" role="button"
                            data-bind="click: loadMoreOperationsByTags">Show more</a>
                        <!-- /ko -->
                        <!-- /ko -->
                        <!-- ko if: operationsByTagsMenuItems().length == 0 -->
                        <span>No operations to display</span>
                        <!-- /ko -->
                        <!-- /ko -->
                    </div>
                    <!-- /ko -->
                    <!-- /ko -->
                </details>
            </div>
            <!-- ko if: api() && (api().type !== 'websocket' && api().type !== 'graphql') -->
            <div class="bottom-item">
                <hr>
                <label class="select-badge">
                    <select id="selectedDefinition" data-bind="value: selectedDefinition" class="download"
                        aria-label="Download API definition">
                        <option value="" disabled="disabled" selected="selected">Download API definition</option>
                        <option value="openapi">Open API 3 (YAML)</option>
                        <option value="openapi+json">Open API 3 (JSON)</option>
                        <option value="swagger"> Open API 2 (JSON)</option>
                        <option value="wadl">WADL</option>
                        <!-- ko if: api().type === 'soap' -->
                        <option value="wsdl">WSDL</option>
                        <!-- /ko -->
                    </select>
                    <span class="arrow flex align-items-center justify-content-center">
                        <i class="icon-emb icon-emb-chevron-down"></i>
                    </span>
                </label>
            </div>
            <!-- /ko -->

        </div>
    </div>
    <div class="page-content">
        <!-- ko if: apiLoading-->
        <spinner class="fit"></spinner>
        <!-- /ko -->

        <!-- ko ifnot: apiLoading-->

        <nav aria-label="breadcrumb" class="mr-20">
            <ol class="breadcrumb">
                <!-- ko foreach: { data: breadcrumbItems, as: 'item' } -->
                <li class="breadcrumb-item text-wrap">
                    <a href="#" data-bind="text: item.title, attr: { href: item.url}"></a>
                </li>
                <!-- /ko -->
            </ol>
        </nav>

        <!-- ko if: api -->

        <!-- ko if: selectedMenuItem().type === 'static' -->
        <!-- ko if: selectedMenuItem().value === 'about' -->
        <!-- ko template: { name: 'aboutApi', data: {api: api(), lastModifiedDate: lastModifiedDate()} } -->
        <!-- /ko -->
        <!-- /ko -->

        <!-- ko if: selectedMenuItem().value === 'products' -->
        <api-products-cards></api-products-cards>
        <!-- /ko -->

        <!-- ko if: selectedMenuItem().value === 'changelog' -->
        <changelog></changelog>
        <!-- /ko -->
        <!-- /ko -->

        <!-- ko if: selectedMenuItem().type === 'documentation' -->
        <wiki-documentation></wiki-documentation>
        <!-- /ko -->

        <!-- ko if: selectedMenuItem().type === 'operation' -->
        <operation-details data-bind="attr: { params: operationDetailsConfig }" class="pt-12"></operation-details>
        <!-- /ko -->

        <!-- /ko -->

        <!-- /ko -->
    </div>
</div>